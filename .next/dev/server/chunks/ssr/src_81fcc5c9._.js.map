{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/flip/Downloads/CollectR/Frontend/src/utils/exportImport.ts"],"sourcesContent":["// CSV Export Helper\nexport function exportToCSV(items: any[], filename: string) {\n  if (items.length === 0) return\n\n  // Spalten definieren\n  const columns = [\n    'name',\n    'description',\n    'status',\n    'purchase_price',\n    'purchase_currency',\n    'purchase_date',\n    'purchase_location',\n    'barcode',\n    'notes',\n    'created_at',\n  ]\n\n  // Header\n  const header = columns.join(';')\n\n  // Rows\n  const rows = items.map(item => {\n    return columns.map(col => {\n      let value = item[col]\n      if (value === null || value === undefined) return ''\n      if (typeof value === 'string' && (value.includes(';') || value.includes('\"') || value.includes('\\n'))) {\n        value = `\"${value.replace(/\"/g, '\"\"')}\"`\n      }\n      return value\n    }).join(';')\n  })\n\n  const csv = [header, ...rows].join('\\n')\n  downloadFile(csv, `${filename}.csv`, 'text/csv;charset=utf-8;')\n}\n\n// JSON Export Helper\nexport function exportToJSON(items: any[], filename: string) {\n  const data = items.map(item => ({\n    name: item.name,\n    description: item.description,\n    status: item.status,\n    purchase_price: item.purchase_price,\n    purchase_currency: item.purchase_currency,\n    purchase_date: item.purchase_date,\n    purchase_location: item.purchase_location,\n    barcode: item.barcode,\n    notes: item.notes,\n    attributes: item.attributes,\n    created_at: item.created_at,\n  }))\n\n  const json = JSON.stringify(data, null, 2)\n  downloadFile(json, `${filename}.json`, 'application/json')\n}\n\n// Download Helper\nfunction downloadFile(content: string, filename: string, mimeType: string) {\n  const blob = new Blob([content], { type: mimeType })\n  const url = URL.createObjectURL(blob)\n  const link = document.createElement('a')\n  link.href = url\n  link.download = filename\n  document.body.appendChild(link)\n  link.click()\n  document.body.removeChild(link)\n  URL.revokeObjectURL(url)\n}\n\n// CSV Parser\nexport function parseCSV(content: string): Record<string, string>[] {\n  const lines = content.split('\\n').filter(line => line.trim())\n  if (lines.length < 2) return []\n\n  const headers = parseCSVLine(lines[0])\n  const rows: Record<string, string>[] = []\n\n  for (let i = 1; i < lines.length; i++) {\n    const values = parseCSVLine(lines[i])\n    const row: Record<string, string> = {}\n    headers.forEach((header, index) => {\n      row[header.trim()] = values[index]?.trim() || ''\n    })\n    rows.push(row)\n  }\n\n  return rows\n}\n\nfunction parseCSVLine(line: string): string[] {\n  const result: string[] = []\n  let current = ''\n  let inQuotes = false\n\n  // Detect delimiter\n  const delimiter = line.includes(';') ? ';' : ','\n\n  for (let i = 0; i < line.length; i++) {\n    const char = line[i]\n    \n    if (char === '\"') {\n      if (inQuotes && line[i + 1] === '\"') {\n        current += '\"'\n        i++\n      } else {\n        inQuotes = !inQuotes\n      }\n    } else if (char === delimiter && !inQuotes) {\n      result.push(current)\n      current = ''\n    } else {\n      current += char\n    }\n  }\n  result.push(current)\n\n  return result\n}\n\n// JSON Parser\nexport function parseJSON(content: string): any[] {\n  try {\n    const data = JSON.parse(content)\n    return Array.isArray(data) ? data : [data]\n  } catch {\n    return []\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/flip/Downloads/CollectR/Frontend/src/app/collections/%5Bid%5D/import/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { createClient } from '@/lib/supabase/client'\nimport Link from 'next/link'\nimport { useRouter } from 'next/navigation'\nimport { use } from 'react'\nimport { parseCSV, parseJSON } from '@/utils/exportImport'\n\ninterface MappedField {\n  source: string\n  target: string\n}\n\nconst TARGET_FIELDS = [\n  { value: '', label: '-- Nicht importieren --' },\n  { value: 'name', label: 'Name *', required: true },\n  { value: 'description', label: 'Beschreibung' },\n  { value: 'status', label: 'Status' },\n  { value: 'purchase_price', label: 'Kaufpreis' },\n  { value: 'purchase_currency', label: 'W√§hrung' },\n  { value: 'purchase_date', label: 'Kaufdatum' },\n  { value: 'purchase_location', label: 'Gekauft bei' },\n  { value: 'barcode', label: 'Barcode' },\n  { value: 'notes', label: 'Notizen' },\n]\n\nexport default function ImportPage({ params }: { params: Promise<{ id: string }> }) {\n  const { id: collectionId } = use(params)\n  const router = useRouter()\n  const supabase = createClient()\n\n  const [userId, setUserId] = useState<string | null>(null)\n  const [collection, setCollection] = useState<any>(null)\n  const [step, setStep] = useState<'upload' | 'mapping' | 'preview' | 'importing' | 'done'>('upload')\n  \n  const [fileData, setFileData] = useState<Record<string, string>[]>([])\n  const [sourceColumns, setSourceColumns] = useState<string[]>([])\n  const [mappings, setMappings] = useState<MappedField[]>([])\n  \n  const [importProgress, setImportProgress] = useState({ current: 0, total: 0, errors: 0 })\n  const [importedCount, setImportedCount] = useState(0)\n\n  useEffect(() => {\n    async function loadData() {\n      // User holen\n      const { data: { user } } = await supabase.auth.getUser()\n      if (user) {\n        setUserId(user.id)\n      } else {\n        router.push('/login')\n        return\n      }\n\n      const { data } = await supabase\n        .from('collections')\n        .select('*')\n        .eq('id', collectionId)\n        .single()\n      setCollection(data)\n    }\n    loadData()\n  }, [collectionId])\n\n  function handleFileUpload(e: React.ChangeEvent<HTMLInputElement>) {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    const reader = new FileReader()\n    reader.onload = (event) => {\n      const content = event.target?.result as string\n      \n      let parsed: Record<string, string>[]\n      if (file.name.endsWith('.json')) {\n        parsed = parseJSON(content)\n      } else {\n        parsed = parseCSV(content)\n      }\n\n      if (parsed.length === 0) {\n        alert('Datei konnte nicht gelesen werden oder ist leer.')\n        return\n      }\n\n      setFileData(parsed)\n      const columns = Object.keys(parsed[0])\n      setSourceColumns(columns)\n      \n      const autoMappings: MappedField[] = columns.map(col => {\n        const colLower = col.toLowerCase()\n        let target = ''\n        \n        if (colLower.includes('name') || colLower.includes('titel') || colLower.includes('bezeichnung')) {\n          target = 'name'\n        } else if (colLower.includes('beschreibung') || colLower.includes('description')) {\n          target = 'description'\n        } else if (colLower.includes('preis') || colLower.includes('price') || colLower.includes('kosten')) {\n          target = 'purchase_price'\n        } else if (colLower.includes('datum') || colLower.includes('date')) {\n          target = 'purchase_date'\n        } else if (colLower.includes('barcode') || colLower.includes('ean') || colLower.includes('upc')) {\n          target = 'barcode'\n        } else if (colLower.includes('notiz') || colLower.includes('note') || colLower.includes('kommentar')) {\n          target = 'notes'\n        } else if (colLower.includes('status')) {\n          target = 'status'\n        } else if (colLower.includes('ort') || colLower.includes('location') || colLower.includes('gekauft')) {\n          target = 'purchase_location'\n        }\n        \n        return { source: col, target }\n      })\n      \n      setMappings(autoMappings)\n      setStep('mapping')\n    }\n    reader.readAsText(file)\n  }\n\n  function updateMapping(source: string, target: string) {\n    setMappings(mappings.map(m => \n      m.source === source ? { ...m, target } : m\n    ))\n  }\n\n  function canProceed() {\n    return mappings.some(m => m.target === 'name')\n  }\n\n  async function startImport() {\n    if (!userId) {\n      alert('Nicht eingeloggt')\n      return\n    }\n\n    setStep('importing')\n    setImportProgress({ current: 0, total: fileData.length, errors: 0 })\n\n    let successCount = 0\n    let errorCount = 0\n\n    for (let i = 0; i < fileData.length; i++) {\n      const row = fileData[i]\n      \n      const itemData: Record<string, any> = {\n        collection_id: collectionId,\n        status: 'in_collection',\n        created_by: userId,  // <-- WICHTIG f√ºr RLS!\n      }\n\n      mappings.forEach(m => {\n        if (m.target && row[m.source]) {\n          let value: any = row[m.source]\n          \n          if (m.target === 'purchase_price') {\n            value = parseFloat(value.replace(',', '.')) || null\n          }\n          \n          itemData[m.target] = value\n        }\n      })\n\n      if (!itemData.name) {\n        errorCount++\n        continue\n      }\n\n      const { error } = await supabase.from('items').insert(itemData)\n      \n      if (error) {\n        errorCount++\n      } else {\n        successCount++\n      }\n\n      setImportProgress({ \n        current: i + 1, \n        total: fileData.length, \n        errors: errorCount \n      })\n    }\n\n    setImportedCount(successCount)\n    setStep('done')\n  }\n\n  return (\n    <div className=\"p-8 max-w-3xl\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <Link\n          href={`/collections/${collectionId}`}\n          className=\"text-slate-500 hover:text-slate-700 text-sm flex items-center gap-1 mb-2\"\n        >\n          ‚Üê Zur√ºck zur Sammlung\n        </Link>\n        <h1 className=\"text-3xl font-bold text-slate-900\">Import</h1>\n        <p className=\"text-slate-500 mt-1\">\n          {collection?.name} ‚Äì Items aus CSV oder JSON importieren\n        </p>\n      </div>\n\n      {/* Step Indicator */}\n      <div className=\"flex items-center gap-2 mb-8\">\n        {['upload', 'mapping', 'preview', 'done'].map((s, i) => (\n          <div key={s} className=\"flex items-center\">\n            <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n              step === s ? 'bg-blue-600 text-white' :\n              ['upload', 'mapping', 'preview', 'importing', 'done'].indexOf(step) > i \n                ? 'bg-green-500 text-white' \n                : 'bg-slate-200 text-slate-500'\n            }`}>\n              {['upload', 'mapping', 'preview', 'importing', 'done'].indexOf(step) > i ? '‚úì' : i + 1}\n            </div>\n            {i < 3 && <div className=\"w-12 h-0.5 bg-slate-200 mx-1\" />}\n          </div>\n        ))}\n      </div>\n\n      {/* Step: Upload */}\n      {step === 'upload' && (\n        <div className=\"bg-white rounded-xl p-8 shadow-sm border border-slate-200 text-center\">\n          <span className=\"text-6xl mb-4 block\">üìÑ</span>\n          <h2 className=\"text-xl font-semibold mb-2\">Datei ausw√§hlen</h2>\n          <p className=\"text-slate-500 mb-6\">CSV oder JSON Datei mit deinen Items</p>\n          \n          <label className=\"inline-block bg-blue-600 text-white px-8 py-4 rounded-xl font-semibold hover:bg-blue-700 transition-colors cursor-pointer\">\n            <input\n              type=\"file\"\n              accept=\".csv,.json\"\n              onChange={handleFileUpload}\n              disabled={!userId}\n              className=\"sr-only\"\n            />\n            Datei ausw√§hlen\n          </label>\n\n          <div className=\"mt-8 p-4 bg-slate-50 rounded-lg text-left text-sm\">\n            <p className=\"font-medium mb-2\">Unterst√ºtzte Formate:</p>\n            <ul className=\"text-slate-500 space-y-1\">\n              <li>‚Ä¢ CSV (Semikolon oder Komma getrennt)</li>\n              <li>‚Ä¢ JSON (Array von Objekten)</li>\n            </ul>\n          </div>\n        </div>\n      )}\n\n      {/* Step: Mapping */}\n      {step === 'mapping' && (\n        <div className=\"bg-white rounded-xl p-6 shadow-sm border border-slate-200\">\n          <h2 className=\"text-xl font-semibold mb-4\">Spalten zuordnen</h2>\n          <p className=\"text-slate-500 mb-6\">\n            {fileData.length} Eintr√§ge gefunden. Ordne die Spalten den Feldern zu.\n          </p>\n\n          <div className=\"space-y-3 mb-6\">\n            {mappings.map(m => (\n              <div key={m.source} className=\"flex items-center gap-4\">\n                <div className=\"w-1/3 p-3 bg-slate-50 rounded-lg text-sm font-mono truncate\">\n                  {m.source}\n                </div>\n                <span className=\"text-slate-400\">‚Üí</span>\n                <select\n                  value={m.target}\n                  onChange={(e) => updateMapping(m.source, e.target.value)}\n                  className=\"flex-1 px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 outline-none\"\n                >\n                  {TARGET_FIELDS.map(f => (\n                    <option key={f.value} value={f.value}>\n                      {f.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            ))}\n          </div>\n\n          {!canProceed() && (\n            <p className=\"text-red-500 text-sm mb-4\">\n              ‚ö†Ô∏è Mindestens \"Name\" muss zugeordnet werden\n            </p>\n          )}\n\n          <div className=\"flex gap-3\">\n            <button\n              onClick={() => setStep('upload')}\n              className=\"px-6 py-3 rounded-lg border border-slate-300 hover:bg-slate-50\"\n            >\n              Zur√ºck\n            </button>\n            <button\n              onClick={() => setStep('preview')}\n              disabled={!canProceed()}\n              className=\"flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50\"\n            >\n              Weiter zur Vorschau\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Step: Preview */}\n      {step === 'preview' && (\n        <div className=\"bg-white rounded-xl p-6 shadow-sm border border-slate-200\">\n          <h2 className=\"text-xl font-semibold mb-4\">Vorschau</h2>\n          <p className=\"text-slate-500 mb-6\">\n            {fileData.length} Items werden importiert\n          </p>\n\n          <div className=\"border rounded-lg overflow-hidden mb-6\">\n            <table className=\"w-full text-sm\">\n              <thead className=\"bg-slate-50\">\n                <tr>\n                  {mappings.filter(m => m.target).map(m => (\n                    <th key={m.target} className=\"px-4 py-2 text-left font-medium text-slate-600\">\n                      {TARGET_FIELDS.find(f => f.value === m.target)?.label}\n                    </th>\n                  ))}\n                </tr>\n              </thead>\n              <tbody>\n                {fileData.slice(0, 5).map((row, i) => (\n                  <tr key={i} className=\"border-t\">\n                    {mappings.filter(m => m.target).map(m => (\n                      <td key={m.target} className=\"px-4 py-2 truncate max-w-[200px]\">\n                        {row[m.source] || '-'}\n                      </td>\n                    ))}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {fileData.length > 5 && (\n            <p className=\"text-slate-400 text-sm mb-6\">\n              ... und {fileData.length - 5} weitere\n            </p>\n          )}\n\n          <div className=\"flex gap-3\">\n            <button\n              onClick={() => setStep('mapping')}\n              className=\"px-6 py-3 rounded-lg border border-slate-300 hover:bg-slate-50\"\n            >\n              Zur√ºck\n            </button>\n            <button\n              onClick={startImport}\n              className=\"flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700\"\n            >\n              üöÄ {fileData.length} Items importieren\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Step: Importing */}\n      {step === 'importing' && (\n        <div className=\"bg-white rounded-xl p-8 shadow-sm border border-slate-200 text-center\">\n          <span className=\"text-6xl mb-4 block animate-bounce\">‚è≥</span>\n          <h2 className=\"text-xl font-semibold mb-2\">Importiere...</h2>\n          <p className=\"text-slate-500 mb-6\">\n            {importProgress.current} von {importProgress.total}\n          </p>\n          \n          <div className=\"w-full bg-slate-200 rounded-full h-3 mb-4\">\n            <div \n              className=\"bg-blue-600 h-3 rounded-full transition-all\"\n              style={{ width: `${(importProgress.current / importProgress.total) * 100}%` }}\n            />\n          </div>\n\n          {importProgress.errors > 0 && (\n            <p className=\"text-orange-500 text-sm\">\n              {importProgress.errors} Fehler\n            </p>\n          )}\n        </div>\n      )}\n\n      {/* Step: Done */}\n      {step === 'done' && (\n        <div className=\"bg-white rounded-xl p-8 shadow-sm border border-slate-200 text-center\">\n          <span className=\"text-6xl mb-4 block\">üéâ</span>\n          <h2 className=\"text-xl font-semibold mb-2\">Import abgeschlossen!</h2>\n          <p className=\"text-slate-500 mb-6\">\n            {importedCount} Items erfolgreich importiert\n            {importProgress.errors > 0 && (\n              <span className=\"text-orange-500\">\n                , {importProgress.errors} Fehler\n              </span>\n            )}\n          </p>\n          \n          <Link\n            href={`/collections/${collectionId}`}\n            className=\"inline-block bg-blue-600 text-white px-8 py-4 rounded-xl font-semibold hover:bg-blue-700\"\n          >\n            Zur Sammlung\n          </Link>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}