{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/flip/Downloads/CollectR/Frontend/src/app/collections/new/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { createClient } from '@/lib/supabase/client'\nimport Link from 'next/link'\n\nexport default function NewCollectionPage() {\n  const router = useRouter()\n  const supabase = createClient()\n  \n  const [name, setName] = useState('')\n  const [description, setDescription] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [userId, setUserId] = useState<string | null>(null)\n\n  // User ID beim Laden holen\n  useEffect(() => {\n    async function getUser() {\n      const { data: { user } } = await supabase.auth.getUser()\n      if (user) {\n        setUserId(user.id)\n      } else {\n        // Nicht eingeloggt -> Login\n        router.push('/login')\n      }\n    }\n    getUser()\n  }, [])\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n    if (!userId) {\n      setError('Nicht eingeloggt')\n      return\n    }\n    \n    setLoading(true)\n    setError(null)\n\n    const { data, error: insertError } = await supabase\n      .from('collections')\n      .insert({\n        name,\n        description: description || null,\n        owner_id: userId,  // <-- WICHTIG: owner_id mitsenden!\n      })\n      .select()\n      .single()\n\n    if (insertError) {\n      setError(insertError.message)\n      setLoading(false)\n      return\n    }\n\n    router.push(`/collections/${data.id}`)\n  }\n\n  return (\n    <div className=\"p-8 max-w-2xl\">\n      <div className=\"mb-8\">\n        <Link \n          href=\"/collections\"\n          className=\"text-slate-500 hover:text-slate-700 text-sm flex items-center gap-1 mb-2\"\n        >\n          ← Zurück zu Sammlungen\n        </Link>\n        <h1 className=\"text-3xl font-bold text-slate-900\">Neue Sammlung</h1>\n        <p className=\"text-slate-500 mt-1\">Erstelle eine neue Sammlung für deine Items</p>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"bg-white rounded-xl p-8 shadow-sm border border-slate-200\">\n        <div className=\"space-y-6\">\n          <div>\n            <label htmlFor=\"name\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n              Name *\n            </label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              required\n              placeholder=\"z.B. Hot Wheels Sammlung\"\n              className=\"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"description\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n              Beschreibung\n            </label>\n            <textarea\n              id=\"description\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              rows={3}\n              placeholder=\"Optional: Beschreibe deine Sammlung...\"\n              className=\"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none\"\n            />\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 text-red-600 p-4 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"flex gap-4\">\n            <button\n              type=\"submit\"\n              disabled={loading || !userId}\n              className=\"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\n            >\n              {loading ? 'Erstelle...' : 'Sammlung erstellen'}\n            </button>\n            <Link\n              href=\"/collections\"\n              className=\"px-6 py-3 rounded-lg border border-slate-300 hover:bg-slate-50 transition-colors text-center\"\n            >\n              Abbrechen\n            </Link>\n          </div>\n        </div>\n      </form>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,gJAAY;IAE7B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAgB;IAEpD,2BAA2B;IAC3B,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,IAAI,MAAM;gBACR,UAAU,KAAK,EAAE;YACnB,OAAO;gBACL,4BAA4B;gBAC5B,OAAO,IAAI,CAAC;YACd;QACF;QACA;IACF,GAAG,EAAE;IAEL,eAAe,aAAa,CAAkB;QAC5C,EAAE,cAAc;QAChB,IAAI,CAAC,QAAQ;YACX,SAAS;YACT;QACF;QAEA,WAAW;QACX,SAAS;QAET,MAAM,EAAE,IAAI,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SACxC,IAAI,CAAC,eACL,MAAM,CAAC;YACN;YACA,aAAa,eAAe;YAC5B,UAAU;QACZ,GACC,MAAM,GACN,MAAM;QAET,IAAI,aAAa;YACf,SAAS,YAAY,OAAO;YAC5B,WAAW;YACX;QACF;QAEA,OAAO,IAAI,CAAC,CAAC,aAAa,EAAE,KAAK,EAAE,EAAE;IACvC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,uKAAI;wBACH,MAAK;wBACL,WAAU;kCACX;;;;;;kCAGD,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,8OAAC;wBAAE,WAAU;kCAAsB;;;;;;;;;;;;0BAGrC,8OAAC;gBAAK,UAAU;gBAAc,WAAU;0BACtC,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC;oCAAM,SAAQ;oCAAO,WAAU;8CAAgD;;;;;;8CAGhF,8OAAC;oCACC,MAAK;oCACL,IAAG;oCACH,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACvC,QAAQ;oCACR,aAAY;oCACZ,WAAU;;;;;;;;;;;;sCAId,8OAAC;;8CACC,8OAAC;oCAAM,SAAQ;oCAAc,WAAU;8CAAgD;;;;;;8CAGvF,8OAAC;oCACC,IAAG;oCACH,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC9C,MAAM;oCACN,aAAY;oCACZ,WAAU;;;;;;;;;;;;wBAIb,uBACC,8OAAC;4BAAI,WAAU;sCACZ;;;;;;sCAIL,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,UAAU,WAAW,CAAC;oCACtB,WAAU;8CAET,UAAU,gBAAgB;;;;;;8CAE7B,8OAAC,uKAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}}]
}